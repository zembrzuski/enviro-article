\documentclass[10pt, conference]{IEEEtran}

% *** GRAPHICS RELATED PACKAGES ***
\usepackage{subimages}
\setfigdir{figs}

% *** MATH PACKAGES ***
\usepackage[cmex10]{amsmath}
\interdisplaylinepenalty=2500
\usepackage{amsthm}
\newtheorem{definition}{Definition}

% *** PDF, URL AND HYPERLINK PACKAGES ***
\usepackage{hyperref}


\usepackage{listings}
\usepackage{color}

\definecolor{dkgreen}{rgb}{0,0.6,0}
\definecolor{gray}{rgb}{0.5,0.5,0.5}
\definecolor{mauve}{rgb}{0.58,0,0.82}

\lstset{frame=tb,
  language=Perl,
  aboveskip=3mm,
  belowskip=3mm,
  showstringspaces=false,
  columns=flexible,
  basicstyle={\small\ttfamily},
  numbers=none,
  numberstyle=\tiny\color{gray},
  keywordstyle=\color{blue},
  commentstyle=\color{dkgreen},
  stringstyle=\color{mauve},
  breaklines=true,
  breakatwhitespace=true,
  tabsize=3
}


\hyphenation{op-tical net-works semi-conduc-tor}


\begin{document}

%
% paper title
% can use linebreaks \\ within to get better formatting as desired
\title{Envirocar visualization \\ exploring an environmental and traffic data set}

%------------------------------------------------------------------------- 
% change the % on next lines to produce the final camera-ready version 
\newif\iffinal
%\finalfalse
\finaltrue
\newcommand{\jemsid}{99999}
%------------------------------------------------------------------------- 

% author names and affiliations
% use a multiple column layout for up to two different
% affiliations

\iffinal
  \author{%
    \IEEEauthorblockN{Rodrigo Claro Zembrzuski}
    \IEEEauthorblockA{%
      Programa de Pos Graduacao em Ciencia da Computacao\\
      Universidade Federal do Rio Grande do Sul - UFRGS\\
      Porto Alegre, Brasil\\
      Web page: \href{http://www.inf.ufrgs.br/~rczembrzuski}{http://inf.ufrgs.br/$\sim$rczembrzuski}}
  }
\else
  \author{Sibgrapi paper ID: \jemsid \\ }
\fi

% for over three affiliations, or if they all won't fit within the width
% of the page, use this alternative format:
% 
%\author{\IEEEauthorblockN{Michael Shell\IEEEauthorrefmark{1},
%Homer Simpson\IEEEauthorrefmark{2},
%James Kirk\IEEEauthorrefmark{3}, 
%Montgomery Scott\IEEEauthorrefmark{3} and
%Eldon Tyrell\IEEEauthorrefmark{4}}
%\IEEEauthorblockA{\IEEEauthorrefmark{1}School of Electrical and Computer Engineering\\
%Georgia Institute of Technology,
%Atlanta, Georgia 30332--0250\\ Email: see http://www.michaelshell.org/contact.html}
%\IEEEauthorblockA{\IEEEauthorrefmark{2}Twentieth Century Fox, Springfield, USA\\
%Email: homer@thesimpsons.com}
%\IEEEauthorblockA{\IEEEauthorrefmark{3}Starfleet Academy, San Francisco, California 96678-2391\\
%Telephone: (800) 555--1212, Fax: (888) 555--1212}
%\IEEEauthorblockA{\IEEEauthorrefmark{4}Tyrell Inc., 123 Replicant Street, Los Angeles, California 90210--4321}}



%------------------------------------------------------------------------- 
% Special Sibgrapi teaser
%\teaser{%
%  \oneimage{Teasing result of our method: from this data input (left), the relevant feature are extracted using our technique (middle), producing effective result (right).}{.99}{sibgrapi.png}
%}
%------------------------------------------------------------------------- 



% make the title area
\maketitle


\begin{abstract}
Envirocar eh um projeto que coleta e armazena dados ambientais e dados de trafego
de automoveis. 
Sao dados de sensores implantados dentro dos veiculos que trazem informacoes
precisas sobre navegacao dos carros e dados relativos a conservacao do meio-ambiente, 
como emissao de gas-carbonico e consumo do veiculo. 

Esse artigo tem por objetivo apresentar uma serie de 
visualizacoes para analise exploratoria desse banco de dados. Com isso, teremos
uma intuicao sobre se esse banco de dados pode servir para alguma coisa, ou nao.

% DO NOT USE SPECIAL CHARACTERS, SYMBOLS, OR MATH IN YOUR TITLE OR ABSTRACT.
%
\end{abstract}

\begin{IEEEkeywords}
envirocar; smartcars; kibana; geolocation; data visualization;

\end{IEEEkeywords}


\IEEEpeerreviewmaketitle


% Wherever Times is specified, Times Roman or Times New Roman may be used. If neither is available on your system, please use the font closest in appearance to Times. Avoid using bit-mapped fonts if possible. True-Type 1 or Open Type fonts are preferred. Please embed symbol fonts, as well, for math, etc.

%==========================================
%==========================================


%==========================================
\section{Introduction}
Envirocar eh um projeto da Universidade de Munster. O objetivo 
do projeto eh oferecer uma plataforma simples para coleta, 
armazenamento e distribuicao de dados ambientais e dados de logistica
de trafego [ref]. 

A plataforma une dados gerados por sensores comuns,
que vem na maioria dos automoveis atuais com sensores de 
geolocalizacao, presente na maioria dos smartphones. Com isso,
cria-se uma base de dados relevante para se medir o fluxo de automoveis
nas avenidas e quantidade de emissao de poluentes nas cidades. 

%------------------------------------------------------------------------- 
\subsection{Motivacao}
%
Um dos grandes desafios da sociedade nos nossos dias eh preservar
e desenvolver a mobilidade urbana de maneira sustentavel, isto eh,
mitigar o impacto do transporte de passageiros meio-ambiente [ref].

Alem disso, observar padroes de comportamento nos motoristas e nas
cidades ao longo do mundo pode ser interessante tanto para ajuda-los
em alguma coisa, quanto para ver diferencas culturais de paises e 
culturas diferrentes evidenciadas no modo em que dirigem.


%\subimages[htb]{Technique overview}{overview}{%
%  \subimage[First step]{.31}{sibgrapi}%
%  \subimage[Second step]{.31}{sibgrapi}%
%  \subimage[Result]{.31}{sibgrapi}%
%}
%------------------------------------------------------------------------- 
\subsection{Objetivos}
%
O objetivo desse trabalho eh fazer uma exploracao basica pela base dados
para ganhar intuicao sobre ela. Para observar se padroes basicos de 
comportamento dos usuarios podem ser detectados conforme ideias
basicas que se tem sobre isso e, por fim, para saber se a base de dados
pode ser utilizada como base para experimentos mais complexos, como 
treinamento de modelos de aprendizagem para um ganho no mundo relevante,
como melhorias no trafego, detecação de anomalias em comportamentos 
e outras cositas mais. 

%------------------------------------------------------------------------- 
\paragraph*{Contributions}
%
Acredito que esse trabalho possa dar um insight interessante sobre
o quao relevante esse dataset pode ser para a observacao de comportamento
dos motoristas.



%------------------------------------------------------------------------- 
\subsection{Resultados esperados}
%
In order to produce this application, we start with this processing, followed by this technique. In order to cope with this challenge, we introduce this formulation to produce this intermediate result. The formulation leads to this type of system, which is efficiently solved by adapting this technique. The final result is produced by this transform. The whole process is schematized in \figref{overview}.


%==========================================
\section{Caracterizacao dos dados}
%

Os dados sao obtidos atraves de sensores comuns em diversos
automoveis (OBD-II) e enriquecidos com informacoes de geolocalizacao
que estao presentes em smartphones. Para preservar a identidade
dos usuarios, suas informacoes pessoais nao sao disponibilizadas e tambem
sao retiradas as informacoes dos primeiros e ultimos 200m de deslocamento,
com objetivo que o usuario nao seja identificado atraves das informacoes
de origem e de destino. 

Uma vez que os automoveis estao em deslocamento, suas informacoes mudam
rapidamente. Desse modo, informacoes populadas no dataset a cada 2 segundos.

Os dados originais do servidor sao persistidos num banco de dados NoSQL -- 
MongoDB -- e oferecidos abertos ao publico atraves de um RESTful web service.
Os dados sao oferecidos em um formato JSON, que eh simples de entender e processar.

Para realizacao desse trabalho, foram acessadas as apis rest e persistidas
as informacoes de cada deslocamento no banco de dados ElasticSearch, por 
motivos que serao esclarecidos em seguida. 



\subsection{Caracterização geral dos dados}

Cada item do dataset eh composto por dois atributos principais, que sao subdivididos
em diversas partes e serao mais detalhados na sequencia: 'properties' e 'features'. 

\begin{itemize}

  \item properties: possui as caracteristicas gerais do veiculo em questao. Esta subdividido
  nos itens apresentados na tabela 1. Veja um exemplo de propriedades extraido do banco de dados.


\begin{lstlisting}
"properties": {
  "sensor": {
    "type": "car",
    "properties": {
      "constructionYear": 2011,
      "model": "Avensis",
      "fuelType": "gasoline",
      "id": "574e78cbe4b09078f97bbb4a",
      "engineDisplacement": 1800,
      "manufacturer": "Toyota"
    }
}
\end{lstlisting}



\begin{table}
\caption{Properties: propriedades gerais de cada veiculo}
\label{tab:perfs}
\centering
\begin{tabular}{l|c}
\multicolumn{1}{l|}{\bf Variavel} &
\multicolumn{1}{l}{\bf Descricao}  \\ \hline
type                & categorica       \\
constructionYear    & discreta           \\
model               & categorica         \\
fuelType            & categorica           \\
engineDisplacement  & discreta             \\
manufactuerer       & categorica       
\end{tabular}
\end{table}

  \item features: possui as caracteristicas do deslocamento -- ou da 'viagem' em si. A viagem
  eh caracterizada pela composicao, a cada dois segundos, do seguinte conjunto de dados:



\begin{table}
\caption{Features: informacoes de cada timestamp do deslocamento}
\label{tab:perfs}
\centering
\begin{tabular}{l|c}
\multicolumn{1}{l|}{\bf Variavel} &
\multicolumn{1}{l}{\bf Unidade de medida}  \\ \hline
coordinates        & geoespacial       \\
speed              & continuo         \\
rpm                & continuo       \\
gps accuracy       & continuo       \\
maf                & continuo         \\
engine load        & continuo       \\
gps pdop           & continuo       \\
o2 lambda voltage  & continuo       \\
throttle position  & continuo       \\
consumption        & continuo       \\
gps vdop           & continuo       \\
gps speed          & continuo       \\
gps bearing        & continuo       \\
intake pressure    & continuo       \\
co2                & continuo       \\
time               & temporal       \\

\end{tabular}
\end{table}








\begin{lstlisting}
{
        "geometry": {
          "coordinates": [
            6.443663779195363,
            51.20348336793408
          ],
          "type": "Point"
        },
        "type": "Feature",
        "properties": {
          "phenomenons": {
            "Speed": {
              "value": 34.647194623947144,
              "unit": "km/h"
            },
            "Rpm": {
              "value": 1584.3050694465637,
              "unit": "u/min"
            },
            "GPS Accuracy": {
              "value": 2.999999910593033,
              "unit": "%"
            },
            "MAF": {
              "value": 9.437765815629945,
              "unit": "l/s"
            },
            "Engine Load": {
              "value": 43.96216858346017,
              "unit": "%"
            },
            "GPS PDOP": {
              "value": 1.4999999776482582,
              "unit": "precision"
            },
            "O2 Lambda Voltage": {
              "value": 3.2762881521175586,
              "unit": "V"
            },
            "Throttle Position": {
              "value": 21,
              "unit": "%"
            },
            "Consumption": {
              "value": 3.102402130874109,
              "unit": "l/h"
            },
            "GPS VDOP": {
              "value": 1.1779116287827491,
              "unit": "precision"
            },
            "GPS Speed": {
              "value": 33.47147411240462,
              "unit": "km/h"
            },
            "GPS HDOP": {
              "value": 0.899999986588955,
              "unit": "precision"
            },
            "Intake Pressure": {
              "value": 44.14216932654381,
              "unit": "kPa"
            },
            "GPS Bearing": {
              "value": 304.7174273121018,
              "unit": "deg"
            },
            "Intake Temperature": {
              "value": 13.000000387430191,
              "unit": "c"
            },
            "CO2": {
              "value": 7.290645007554156,
              "unit": "kg/h"
            },
            "O2 Lambda Voltage ER": {
              "value": 0.9988191702782387,
              "unit": "ratio"
            },
            "GPS Altitude": {
              "value": 104.90115790988267,
              "unit": "m"
            }
          },
          "id": "590ad752268d1b08a47f18d4",
          "time": "2017-03-27T04:51:05Z"
        }
      }
\end{lstlisting}



\end{itemize}




\subsection{Questoes a serem respondidas}
Existe uma serie de questoes que me vem rah cabeca nesse instante que,
inclusive, ja tomei notas.

\begin{itemize}
  \item quais marcas/modelos consomem mais gasolina?
  \item quais marcas/modelos poluem mais o meio ambiente?
  \item qual o perfil de pilotagem de cada automovel?
  \item muita gente usa esse dataset?
  \item de que lugares sao as pessoas que utilizam esse sistema? no Brasil, no mundo?
  \item existe muita gente utilizando esse sistema hoje em dia?
  \item quais os modelos e fabricantes mais comuns?
  \item os modelos e fabricantes mais comum na Europa sao os mesmos do Brasil?
  \item quais sao as marcas e modelos que mais poluem? quais sao as marcas e modelos que menos poluem?
  \item podemos descobrir quais sao as regioes mais poluidas e regioes menos poluidas?
  \item eh possivel utilizar este dataset para extrair padroes de comportamento de cada usuario?
\end{itemize}




%==========================================
\section{Preparacao dos dados para visualicao}

O envirocar eh uma base aberta de dados para quem quiser usar. Simples assim. Entretanto,
eles nao colocam seu banco de dados para que seja feito download de forma simples. Eles 
expoem um servico REST que, de forma simplificada, oferece um acesso facil aos dados.

Para que eu pudesse fazer a visualizacao de maneira geral, primeiramente eu fiz um script
que baixava cada uma das viagens para minha maquina e as indexava no elasticsearch. O script
rodou por horas, porque eu fiz download de maneira sequencial, ate para nao acocar o servidor
dos caras.

A base de dados ate nao eh muito grande. Sao 15 mil viagens, o que nao parece muito. Entretanto,
o volume de dados eh relativamente grande, pois para cada viagem, eh enviado para o banco de dados
uma serie de informacoes a cada 2 segundos. Entao, embora o numero de viagens seja relativamente 
pequeno, o tamanho de cada viagem eh grande. Para se ter uma ideia, minha base indexada no elasticsearch 
ocupou 6 Gb de disco.

Alem disso, para poder facilitar as visualizacoes, eu fiz uma serie de metricas. Por exemplo, 
para comparar quais carros emitem mais gas carbonito, por exemplo, para cada viagem eu computei
a media do gas carbonico emitido naquela viagem, pois a base de dados nao oferece issos. A base de
dados oferece uns dados longos e, se eu quiser manter isso no artigo, vou ter que dar
um jeito de explicar muito bem, porque ficou uma bosta, no fim das contas.



%==========================================
\section{Tecnica de visualização desenvolvida}
\label{sec:technique}
%
A exploracao dos dados foi feito com com o uso de duas ferramentas: Kibana e R.


Kibana eh uma ferramenta utilizada para nalise por inspecao manual e visualizacao
de informacoes que funciona de maneira natural com o ElasticSearch. Dessa  forma, 
eh  ela  que ira apresentar os dados armazenados no ElasticSearch, em uma interface,  via
browser, altamente customizável com histogramas, mapas e outros painéis que propiciam uma visão
geral sobre os dados.  O Kibana possibilita transformar os logs em informações úteis (valor)
através  de Dashboards,  pois  permite  realizar  correlação  de  eventos,  filtrar logs
por  origem, hospedeiros, entre outras combinações (VAARANDI; NIZINSKI, 2013).

Foi utilizado o ElasticSearch como base primaria dos dados, pois alem do suporte a persistencia,
vem junto com uma serie de mecanismos e algoritmos de recuperacao de informacao. A ferramenta
permite combinar geolocalizacao com full-text search, structured text, and analytics.

Outras ferramenta para visualizacao de informacoes utilizada foi a linguagem R. A linguagem
tambem possui uma variada gama de tecnicas para visualizacao de dados, alem de possuir um
suporte muito grande a questoes de estatistica e de probabilidade. 

O R nao eh uma ferramenta de tao alto nivel de abstracao quanto o kibana em que, uma vez
que os dados estao persistidos, se montam visualizacoes com alguns cliques. Aqui, eh necessario
que se escreva codigo para que as visualizacoes aparecam. Os graficos nao aparecem de uma
forma tao elegante quanto o elasticsearch, mas possui muito mais flexibilidade, maleabilidade
e estensibilidade que o kibana. Alem disso, existe um conjunto muito mais vasto de visualizacoes
que o kibana, como boxplots e matrizes de correlacoes.

Dessa maneira, a combinacao de ferramentas se fez necessaria, para atingir requisitos um pouco
diferentes. Essa combinacao trara uma experiencia legal para o usuario.

%------------------------------------------------------------------------- 
\subsection{Histograma}

Com o intuito de saber se muita gente utiliza a plataforma envirocar, foi desenvolvido
um histograma em que o eixo x corresponde a variavel temporal e o eixo y corresponde
a quantidade de viagens naquele periodo de tempo. Com isso, podera ser inferido se bastante
gente vem utilizando a ferramenta e, principalmente, se se uso vem crescendo ou decrescendo
com o passar do tempo. Eh um estudo de tendencias, portanto.

Pode-se observar o grafico abaixo, que nao existe uma tendencia de aumento ou de diminuicao
ao longo do tempo. O que se observa eh um 'boom' de uso no periodo em volta do ano de 2016,
mas que nao se mantem no restante do tempo. No periodo de novembro de 2016, por exemplo, 
tivemos 3600 viagens naquele mes. Mas no inicio de 2017, nao passavam de 100 viagens por mes.

Nao se pode observar, portanto, um uso massivo da plataforma. Entretanto, temos uma amostra
que parece razoavel para que se possa tentar responder as outras perguntas do artigo.

\oneimage{ No eixo x, observamos a quantidade de uso da plataforma ao longo dos meses.}{.99}{simple_histogram.png}


%------------------------------------------------------------------------- 
\subsection{Heatmaps}

Uma vez visualizada a distribuicao temporal da utilizacao da plataforma, ira ser observada a
distribuicao geografica dos usuarios. Como ja se sabe que eh uma plataforma desenvolvida
na Alemanha, pode-se supor que muita gente na Europa ira utilizar a ferramenta, em relacao
as outras regioes do globo.

A visualizacao por calor, utilizando como metrica a quantidade de viagens dispostas no globo
terrestre, dara um senso de quais regioes sao mais utilizadas a ferramenta.

Observando o grafico a seguir, observamos aquilo que ja era suposto de antemao: de fato,
na Europa, a plataforma eh mais utilizada. Alem disso, conseguimos obter alguns dados que nao
eram imaginados. Vemos pontos isolados de uso nos Estados Unidos, Brasil, India e Australia.

Com as informacoes geoespaciais, ganha-se confianca de que poderao ser respondidas outras questoes,
como o comportamento dos motoristas em diferentes regioes do globo. Alem disso, pode-se utilizar
esse grafico para clusterizar de maneira macro o globo terrestre de acordo com essa base de 
dados: America do Norte, America do Sul, Europa, India e Australia.

A visualizacao de heatmat traz uma ideia muito clara sobre os pontos que mais utilizam a 
ferramenta. Traz-nos a ideia de que em diversos pontos do globo ela esta sendo utilizada, com
enfase na Europa. Traz confianca de que poderemos observar padroes de comportamento em diversos
pontos do globo. Ela traz uma ideia basica, mas nao definitiva, da quantidade de pessoas
que utiliza a ferramenta ao longo do globo.


\oneimage{ Aqui, podemos observar que a maioria dos usuarios, de fato, se encontra,
na Europa. Contudo, existem pessoas utilizando em diversos outros pontos do globo também.}{.99}{heatmap.png}


%------------------------------------------------------------------------- 
\subsection{Grafico em pizza}

O heatmap deu uma ideia basica sobre a quantidade de pessoas que utilizam a plataforma ao redor
do globo. Entretanto, nao trouxe uma idea definitiva sobre as proporcoes de cada regiao.

Para isso, sera utilizado um grafico em pizza, que traz claramente a ideia de proporcoes ao
usuario, ao dispor em fatias cada segmento analizado.

Nesse grafico, sera utilizado o cluster inferido visualmente do heatmatp com as seguintes
regioes: Europa, America do Norte, America do Sul, India e Australia.

Aqui, pode-se observar a imensa maioria, de fato, utilizando na Europa: 97\% dos usuarios
esta la. Temos alguma representatividade, com 1\% dos Usuarios na America do Norte e 1\% 
na Australia.

Na America do Sul e na India, nao chega a 1\% de usuarios. Parece ter sido realmente um usuario
curioso que comecou a utilizar a plataforma em sua terra natal.

Essa informacao podera ser utilizada de uma maneira que achei incrivel: para comparacao de
dados globais, como estatisticas e tentativas de detecao de comportamento em massa, devera
ser dado foco nos usuarios da Europa.

Entretanto, essa falta de representatividade em outras partes do globo podera favorecer um
olhar mais individualista. Por exemplo, pode-se acreditar que na America do Sul e na India,
eh sempre a mesma pessoa que utiliza a ferramenta. Desse modo, poderemos observar algum
comportamento individual. Do mesmo modo pode ser feito na America do Norte e na Australia,
com um pouco mais de criterio, pois la houve muito mais uso.

Entretanto, na Europa, nao podemos fazer isso, pois eh muita gente usando. Na Europa, serao
feitas analises mais genericas.

\oneimage{ 98\% dos deslocamentos esta na Europa. 1\% esta na America do Norte e 1\% esta
na Australia. Outras regioes sao sao insignificantes, que nem visualizamos no grafico .}{.99}{pizza_por_regiao.png}



%------------------------------------------------------------------------- 
\subsection{Graficos em pizza}

Observadas algumas questoes temporais e espaciais, irao ser analisados alguns padroes de comportamento
em diferentes regioes do globo. Sera utilizado aquele cluster inferido do primeiro heatmap para
fazer uma analise sobre quais sao os fabricantes mais utilizados em diferentes partes do globo.

Sobre padroes de comportamento, espera-se verificar se supostos padroes culturais podem de uma determinada
regiao do globo pode ser inferida atraves deste banco de dados. Por exemplo, eh verdade que americanos
gostam de carros espacosos? Eh verdade que na Europa e Estados Unidos os carros sao muito melhores
do que os da America do Sul?

Para responder essa pergunta, algumas visualizacoes foram feitas algumas suposicoes de tecnicas
de visualizacao: sunbsurst e nugget. 

A tecnica de sunbsurst nao pareceu muito adequada devido a quantidade de informacoes -- muito grande para
um espaco pequeno -- e o biscoito nao transpareceu de maneira clara o que estava sendo perguntado.

Para isso, foi utilizada novamente a tecnica de visualizacao de graficos em pizza. Entretanto, agora,
em vez de plotar somente um grafico, o foram plotados 5 graficos em pizza, em que cada pizza corresponde
a uma regiao do cluster. Essa visualizacao foi escolhida em detrimento do sunburst pois a segmentacao
trouxe mais evidencia para respoder aquilo que estava sendo perguntado. O sunburst trouxe muita informacao
em muito pouco espaco fisico, o que pareceu meio confuso.

Observando os fabricantes, vemos que as principais marcas na America do Norte, Australia e Europa
sao as mesmas.

\begin{itemize}
  \item America do Norte: Chevrolet, Toyota e Hiunday
  \item Australia: Ford, Toyota e Opel
  \item Europa: Toyota, Ford, Opel, VW, BMW
\end{itemize}

Ja na America do Sul e India, parecem ser regioes mais humildes tambem, pois aqui nao observamos
Hiunday e BMW.

\begin{itemize}
  \item America do Sul: Ford
  \item India: Renault e VW
\end{itemize}

Baseado nessa amostra de dados, nao se pode chegar a uma conclusao definiva para as
questoes levantadas. A distribuicao entre Europa, Estados Unidos e Australia ficaram razoavelmente
parecidas. Ja na America do Sul e India, realmente parecem regioes menos desenvolvidas. Entretanto,
a amostra dos dados nao parece ser significativa o suficiente para uma conclusao assertiva. A observacao
do grafico parece corrobarar a ideia inicial, utilizada para fazer as pergutnas, mas nao ha evidencias
que, de fato, elas acontecem.

\oneimage{ Estados Unidos e Europa apresentam resultados parecidos. America do Sul supoe que somente um cara utilizou a plataforma.}{.99}{marcas_por_regiao.png}


%------------------------------------------------------------------------- 
\subsection{Sunburst}

A Sunburst visualization is a radial space-filling visualization technique for displaying tree like structures. 
There are other space-filling visualization methods that use other visual encodings for describing hierarchies.

Essa tecnica mostra-se muito adequada para condensar informacoes hierarquicas, como para responder a pergunta:
para cada fabricante, qual eh o modelo de automovel mais utilizado. 

Como na Europa existe uma amostra muito mais significicativa do que em outras regioes do globo, a
pergunta fica limitada a regiao da Europa. Alem disso, para que a visualizacao nao acontecesse de maneira
muito confusa, para que ela ficasse clara, foram escolhidos os 5 fabricantes mais utilizados e os 3 modelos
mais utilizados por cada fabricante. Se nao houvesse essa limitacao, o grafico ficaria muito poluido, o que
gera um desconforto ao usuario.

Esse grafico, novamente, corrobora a intuicao de que na Europa o nivel dos automoveis eh maior do que no Brasil.
Observamos que os fabricantes mais comuns la sao os mesmos que os presentes no Brasil. Exceto pela BMW, que
muito pouco se observa por aqui, vemos que VW, Ford, Opel (GM) e Toyota sao os mais presentes por la.

A difenca de padrao de veiculos se observa nos modelos mais comuns, uma vez que os fabricantes sao os mesmos.
Por exemplo, os modelos mais comuns da VW sao New Beetle, Golf e Polo. Notavelmente, sao veiculos mais
sofisticados que os modelos comuns brasileiros. O mesmo se observa nos veiculos da Ford, cujos modelos
mais populares sao Transit, Fusion e Focus. Aqui, esses automoveis sao automoveis de elite.

\oneimage{ Observamos que as marcas mais comuns na Europa sao as mesmas do brasil, exceto pelo BMW. Nunca vemos BMWs pelo Brasil.}{.99}{sunburst_marca_modelo.png}




%------------------------------------------------------------------------- 
\subsection{Radar}

Para que se possa identificar quais sao as marcas e modelos que mais poluem e que menos poluem
de uma forma bastante rica, optou-se por fazer uma visualizacao em forma de radar. Dessa forma,
foi possivel ver, para cada fabricante, uma serie de atributos que parecem ser correlacionados.
Sao eles: rotacao do motor (rpm), consumo, velocidade, duracao da viagem, tempo de viagem e 
quantidade de gas carbonico emitido. 

Para que isso pudesse ser sintetizado adequadamente na forma de um radar, foram feitas uma serie
de computacoes em cada um dos itens. Lembrando que diversos desses atributos mencionados, como
co2, rpm, consumo e velocidade mudam periodicamente -- a cada dois segundos --, foi feita uma media
para cada um desses atributos em cada viagem. Posteriormente, foi feita uma normalizacao desses dados,
pois a ferramenta de visualizacao que o Kibana oferece nao permite que se coloque diferentes escalas
em cada um dos eixos.

Computadas essas medias e normalizados os dados, podemos observar o grafico de radar. E ele nos leva
a algumas informacoes bastante curiosas:

Peugeot eh o fabricante que normalmente se anda com a rpm mais alta e eh o cara que tem maior consumo, 
mas nao eh o fabricante que anda mais rapido. 

O fabricante que anda mais rapido eh o Jeep, e ele consome menos que os Peugeot, normalmente.

Curioso observar tambem, que o Porshe eh a marca que se anda com rpm mais baixa -- ao contrario do que normalmente
se imagina -- e cuja velocidade eh mais baixa tambem. Acredito que isso se de porque o Porshe deve ter uma
representatividade muito baixa na amostra. Portanto, se voce quiser andar rapido, nao compre um Porshe!

Para quem deseja comprar um automovel que consuma pouco e que ande com a rotacao do motor baixa, recomenda-se,
de acordo com esse dataset, o uso de um Chevrolet.

\oneimage{ Diversos atributos seccionado por fabricante.}{.99}{radar.png}


O mesmo tipo de visualizacao pode ser aplicado, nao aos fabricantes, mas aos modelos dos automoveis em si.
Na figura X, observam-se os modelos que menos poluem -- observe que dos 5 apresentados, 2 sao chevrolet, o
que esta de acordo com o grafico de radar apresentado por fabricantes -- e observe que os que mais poluem
sao modelos esportivos, cuja rotacao de motor normalmente eh alta.


\oneimage{ Modelos que menos poluem.}{.99}{radar_modelos_ascending.png}

\oneimage{ Modelos que mais poluem.}{.99}{radar_modelo_descending.png}









%------------------------------------------------------------------------- 
\subsection{Matriz de correlacao}

Como foi observado no grafico de radar que a rotacao do motor esta intimamente ligada
ao consumo dos automoveis, decidi por fazer uma apresentacao de uma matriz de correlacao. 
O intuito, com essa visualizacao eh verificar quais atributos estao mais ligados um ao
outros. Por exemplo, para ter certeza de que, se o automovel esta com rotacao maior, que
ele esta poluindo mais. Alem disso, para poder observar se faz sentido associar a 
velocidade ah quantidade de emissao de poluentes.

Nessa visualizacao, ao contrario das anteriores, foi utilizada linguagem R. Ela possui
mais suporte a visualizacoes e trabalhos estatisticos do que o Kibana. 

Nessa representacao, quanto mais azul e quanto mais cheio esta o circulo superior, maior
eh a correlacao entre os atributos. Observamos que quanto maior o consumo de combustivel,
maior eh a quantidade de gas carbonico emitido. Observamos tambem que existe grande
correlacao entre rpm e velocidade, o que me surpreendeu um pouco, ate. Outra coisa
que me surpeendeu um pouco foi que parece nao haver correlacao entre velocidade e duracao
de uma viagem. Me surpreendeu porque normalmente eu ando em velocidade mais alta quando
faco viagens mais longas. Mas acho que na Europa nao eh assim que acontece. Existem
outras coisas que se pode observar por ai tb.

\oneimage{ Diversos atributos seccionado por fabricante.}{.99}{correlacao.png}



%==========================================
\section{Resultados}
%

As visualizacoes deram uma visao geral sobre a base de dados, e praticamente todas
as perguntas que puderam ser respondidas. 

\begin{itemize}
  
  \item observamos que, de fato, a maioria dos usuarios esta na Europa. Alem disso, observamos
    que por um curto periodo de tempo, houve muita gente utilizando a plataforma, mas que essa
    quantidade de gente a utilizando nao se sustentou por muito tempo.

  \item pode-se observar alguns padroes de comportamento utilizando esse dataset: na Europa, os
    fabricantes mais comuns sao praticamente mesmos fabricantes do Brasil. Entretanto, os carros
    comercializados por esses fabricantes por la sao superiores aos brasileiros.

  \item observamos de maneira clara, atraves da visualizacao de radar, quais sao as marcas
  e fabricantes cujos veiculos poluem mais e quais poluem menos. Vimos, nesse mesmo grafico de radar,  
  quais sao os que gastam mais e os que gastam menos combustivel.

  \item observamos ainda que esse dataset, embora nao seja tao rico quanto se supunha no inicio,
    ainda assim ele pode ser utilizado para se detectar padroes de comportamento individuais 
    nas pilotagens.

\end{itemize}



%==========================================
%\section{Experiments}
%
%We validate our technique through a series of experiments.


%------------------------------------------------------------------------- 
%\paragraph*{First experiment}
%
%The first experiment checks this aspect of our method on perfect examples.


%------------------------------------------------------------------------- 
%\paragraph*{Second experiment}
%
%The second experiment checks the speedup obtained by the implementation strategy compared to previous technique~\cite{Sibgrapi2015}.


%------------------------------------------------------------------------- 
%\paragraph*{Third experiment}
%
%The last experiment test our method on real data.



%==========================================
%\section{Results and Discussion}
%
%We performed the above-mentioned experiments on the following type of data: \ldots{} For each data, we used the following tuning parameters of our method.


%\begin{table}
%\caption{Performances results: timings are expressed in milliseconds.}
%\label{tab:perfs}
%\centering
%\begin{tabular}{lr|rr|c}
%\multicolumn{1}{c}{\bf Data} &
%\multicolumn{1}{c|}{\bf Size} &
%\multicolumn{1}{c}{\bf Ours} &
%\multicolumn{1}{c|}{\bf Previous} &
%\multicolumn{1}{c}{\bf Gain} \\ \hline
%Data 1	&        50 	& 0.1 &     1 000	& x$10^3$ \\
%Data 2	&      100 	& 0.2 &     2 000	& x$10^3$ \\
%Data 3	&      500 	& 0.8 &   10 000	& x$10^3$ \\
%Data 4	&   1 000 	& 1.2 &   20 000	& x$10^3$ \\
%Data 5	&   5 000 	& 1.9 & 100 000	& x$10^4$ \\
%Data 6	& 10 000 	& 2.1 & 200 000	& x$10^4$
%\end{tabular}
%\end{table}
%
%------------------------------------------------------------------------- 
%\subsection{Performances}
%%
%We report on Table~\ref{tab:perfs} the performances of our technique on a computer at xxGhz with this graphic card.
%We observe that our technique outperforms previous approaches on this kind of data, and an equivalent result on this other kind of data.

%\subimages[htb]{Quality assessment}{quality}{
%  \subimage{.48}{sibgrapi}%
%  \subimage{.48}{sibgrapi}%
%}


%------------------------------------------------------------------------- 
%\subsection{Quality}
%
%As observed on \figref{quality}, our method achieve good results in this situation. 
%This can be measured by this criterion, and the results are reported on Table~\ref{tab:quality}.

%\begin{table}
%\caption{Quality measures: timings are expressed in milliseconds.}
%\label{tab:quality}
%\centering
%\begin{tabular}{l|r|r}
%\multicolumn{1}{c}{\bf Images} &
%\multicolumn{1}{c|}{\bf PSNR} &
%\multicolumn{1}{c}{\bf  MSE} \\ \hline
%Image 1	&  40.2	& 0.02 \\
%Image 2	&  30.9	& 1.02 \\
%Image 3 &  20.1 & 0.18 \\
%\end{tabular}
%\end{table}


%------------------------------------------------------------------------- 
%\subsection{Limitation}
%
%As mentioned in Section~\ref{sec:technique}, we expect our method to suit better this kind of data. On the other kind, this particularity does not fit into our formulation for this and that reason. Indeed, this can be observed in the results of \figref{quality}. 
%We plan to improve for that kind of data in future work. However, our technique performed well on this data, which does not respect our condition, since this other aspect reduced the negative impact of its characteristic.


%==========================================
\section{Conclusao}
%

Foi atingido objetivo de se fazer uma exploracao basica na base de dados oferecida pelo envirocar. Obteve-se 
intuicao sobre essa base de dados e padroes de comportamento dos motoristas de automovel. 

Padroes culturais,
como o tipo de veiculos e fabricantes utilizados na Europa em comparacao com o Brasil foram identificados. 
Alem disso, padroes individuais de pilotagem de automoveis foram identificados. 

Alem disso, foi observadas as distribuicoes temporais e espaciais dos registros de veiculos.

A base de dados nao eh tao utilizada quanto se supunha -- o autor imaginava que mais gente utilizasse a
plataforma --, mas possui-se uma amostra significativa de pessoas para que se possa levar o trabalho
mais adiante e utilizar essa base para treinar algum modelo de machine learning em trabalhos futuros.

Alem disso, pode-se fazer uma analise basica sobre o uso de ferramentas como Kibana e como R para
visualizacao de informacoes. O Kibana, mais simples, apresenta graficos mais bonitos. O R, entretanto,
apresenta graficos mais cruz e uma linguagem de baixo nivel. O R, portanto, vai ser mais aproveitado
por usuarios mais experientes -- como programadores --, enquanto o Kibana pode ser utilizado por usuarios
mais leigos.



%==========================================
\iffinal
% use section* for acknowledgement
\section*{References}
%

\begin{itemize}
  \item xxxx
  \item xxxx
  \item xxxx
  \item xxxx
  \item xxxx
  \item xxxx
  \item xxxx
  \item xxxx
\end{itemize}

\fi



%==========================================

% trigger a \newpage just before the given reference
% number - used to balance the columns on the last page
% adjust value as needed - may need to be readjusted if
% the document is modified later
%\IEEEtriggeratref{8}
% The "triggered" command can be changed if desired:
%\IEEEtriggercmd{\enlargethispage{-5in}}

\bibliographystyle{IEEEtran}
\bibliography{example}

\end{document}
